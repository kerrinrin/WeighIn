function __processArg(t,e){var i=null;return t&&(i=t[e]||null,delete t[e]),i}function Controller(){function t(){var t,e,r=Ti.Network.createHTTPClient();r.onload=function(){var r=JSON.parse(this.responseText),n=[];if(r){for(var s=0;s<r.length;s++){t=r[s].CurWeight,e=r[s].IntWeight;var o=t/e*100;n.push({ContainerID:r[s].ContainerID,initialWeightBind:{id:r[s].IntWeight},CurWeightBind:{id:r[s].CurWeight},containerLabelBind:{text:r[s].LabelName},CurWeightPercent:{text:"Percent left: "+o+"%"}})}i.containerView.sections[0].setItems(n)}},r.onerror=function(){alert("Could not get messages")},r.open("GET","http://52.24.159.58/getWeight.php"),r.setRequestHeader("User-Agent","SmartTray"),r.send()}function e(e,i,r){var n=Ti.Network.createHTTPClient();n.onload=function(){Titanium.API.info("newName: "+e+" newInit: "+i+" containerID: "+r)},n.onerror=function(){alert("Could not save label")},n.open("POST","http://52.24.159.58/saveData.php?newName="+e+"&newInit="+i+"&containerID="+r),n.setRequestHeader("User-Agent","SmartTray"),n.send(),t()}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="index",arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var i=this,r={};i.__views.index=Ti.UI.createWindow({backgroundColor:"white",id:"index"}),i.__views.index&&i.addTopLevelView(i.__views.index),i.__views.refresh=Ti.UI.createButton({id:"refresh",top:"30",title:"Refresh"}),i.__views.index.add(i.__views.refresh),i.__views.containerInfo=Ti.UI.createScrollView({backgroundColor:"#fff",id:"containerInfo",top:"100",layout:"vertical"}),i.__views.index.add(i.__views.containerInfo);var n={},s=[],o={type:"Ti.UI.View",childTemplates:function(){var t=[],e={type:"Ti.UI.Label",bindId:"containerLabelBind",properties:{color:"#fff",font:{fontSize:28},bindId:"containerLabelBind",left:"10",top:"5"}};return t.push(e),t}(),properties:{backgroundColor:"#409f97",top:"0",height:"50",width:"100%"}};s.push(o);var a={type:"Ti.UI.Label",bindId:"CurWeightPercent",properties:{color:"#463e3e",font:{fontSize:26},bindId:"CurWeightPercent",left:"10",top:"50"}};s.push(a);var l={type:"Ti.UI.Label",bindId:"initialWeightBind",properties:{bindId:"initialWeightBind"}};s.push(l);var h={type:"Ti.UI.Label",bindId:"CurWeightBind",properties:{bindId:"CurWeightBind"}};s.push(h);var c={type:"Ti.UI.Label",bindId:"dateAdded",properties:{color:"#463e3e",font:{fontSize:22,fontStyle:"italic"},bindId:"dateAdded",left:"10",top:"90",text:"Added on 5/8/15"}};s.push(c);var u={type:"Ti.UI.Button",properties:{backgroundColor:"#45666d",color:"#fff",font:{fontSize:24},width:"100%",height:"40",top:"150",title:"Reset Container"}};s.push(u);var d={type:"Ti.UI.View",properties:{backgroundColor:"#fff",top:"190",height:"40"}};s.push(d);var p={properties:{name:"template",backgroundColor:"#e1fdb2"},childTemplates:s};n.template=p,i.__views.__alloyId16=Ti.UI.createListSection({id:"__alloyId16"});var f=[];f.push(i.__views.__alloyId16),i.__views.containerView=Ti.UI.createListView({sections:f,templates:n,apiName:"Ti.UI.ListView",id:"containerView",width:"80%",top:"50",defaultItemTemplate:"template",classes:[]}),i.__views.containerInfo.add(i.__views.containerView),r.destroy=function(){},_.extend(i,i.__views),i.index.open();var g=require("com.acktie.mobile.android.nfc");g.isNFCEnabled?g.init():alert("Device does not support NFC! :( )"),t(),i.refresh.addEventListener("click",function(){t(),Titanium.API.info("refresh")}),i.containerView.addEventListener("itemclick",function(t){var i=t.section.getItemAt(t.itemIndex),r=i.initialWeightBind.id,n=i.CurWeightBind.id,s=i.ContainerID;i.containerLabelBind.text,Titanium.API.info(n),Titanium.API.info("containID: "+s),Titanium.API.info("int: "+r),Titanium.API.info("cur: "+n),t.section,t.itemIndex;var o=Ti.UI.createTextField(),a=Ti.UI.createAlertDialog({title:"Label your container",cancel:1,androidView:o,buttonNames:["Label it","Cancel"]});a.show(),a.addEventListener("click",function(t){t.index!=t.source.cancel&&(Titanium.API.info(o.value),i.containerLabelBind.text=o.value,r=n,Titanium.API.info("New init weight:"+r),e(o.value,r,s))})}),_.extend(i,r)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;